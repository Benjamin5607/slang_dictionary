<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Slang Hunter</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 600px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 25px; }
        .search-box { display: flex; gap: 10px; margin-bottom: 25px; }
        input { flex: 1; padding: 14px; border: 1px solid #ddd; border-radius: 12px; font-size: 16px; outline: none; }
        button { padding: 14px 24px; background-color: #2da44e; color: white; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; }
        button:disabled { background-color: #94d3a2; }
        .card { background: white; padding: 20px; border-radius: 16px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); margin-bottom: 16px; border: 1px solid #e1e4e8; }
        .word { font-size: 1.4em; font-weight: 800; color: #0366d6; margin-bottom: 8px; }
        .definition { margin-bottom: 12px; line-height: 1.6; }
        .example { background-color: #f6f8fa; padding: 12px; border-left: 4px solid #0366d6; font-style: italic; color: #555; }
        .status { text-align: center; color: #666; margin-top: 30px; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸŒ ê¹ƒí—ˆë¸Œ ìŠ¬ë­ í—Œí„°</h1>
    
    <div class="search-box">
        <input type="text" id="searchInput" placeholder="ìŠ¬ë­ ê²€ìƒ‰ (ì˜ˆ: Flex, Stan)" onkeypress="handleEnter(event)">
        <button onclick="startSearch()" id="searchBtn">ê²€ìƒ‰</button>
    </div>

    <div id="resultArea"></div>
</div>

<script>
    // 3ê°œì˜ ìš°íšŒë¡œ(í”„ë¡ì‹œ) ì¤€ë¹„
    const PROXIES = [
        (url) => `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
        (url) => `https://corsproxy.io/?${encodeURIComponent(url)}`, 
        (url) => `https://thingproxy.freeboard.io/fetch/${url}`
    ];

    async function startSearch() {
        const input = document.getElementById('searchInput');
        const query = input.value.trim();
        const resultArea = document.getElementById('resultArea');
        const btn = document.getElementById('searchBtn');

        if (!query) return alert("ë‹¨ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");

        resultArea.innerHTML = '<p class="status">ì±„êµ´ ì¤‘... â›ï¸</p>';
        btn.disabled = true;

        const targetUrl = `https://api.urbandictionary.com/v0/define?term=${query}`;
        let success = false;

        // ì¢€ë¹„ ì „ëµ: 1ë²ˆì´ ì‹¤íŒ¨í•˜ë©´ 2ë²ˆ, 2ë²ˆ ì‹¤íŒ¨í•˜ë©´ 3ë²ˆ ì‹œë„
        for (let i = 0; i < PROXIES.length; i++) {
            try {
                console.log(`ì‹œë„ ì¤‘: ìš°íšŒë¡œ ${i + 1}`);
                const proxyUrl = PROXIES[i](targetUrl);
                
                const response = await fetch(proxyUrl);
                if (!response.ok) throw new Error("ì‘ë‹µ ì‹¤íŒ¨");
                
                const data = await response.json();
                
                // ë°ì´í„° í‘œì‹œ (ì„±ê³µ ì‹œ ë£¨í”„ íƒˆì¶œ)
                displayResults(data.list);
                success = true;
                break; 

            } catch (e) {
                console.warn(`ìš°íšŒë¡œ ${i + 1} ë§‰í˜:`, e);
                // ë‹¤ìŒ ìš°íšŒë¡œë¡œ ê³„ì† ì§„í–‰
            }
        }

        if (!success) {
            resultArea.innerHTML = '<p class="status">âŒ ëª¨ë“  ìš°íšŒë¡œê°€ ë§‰í˜”ìŠµë‹ˆë‹¤.<br>ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</p>';
        }

        btn.disabled = false;
    }

    function displayResults(list) {
        const resultArea = document.getElementById('resultArea');
        if (!list || list.length === 0) {
            resultArea.innerHTML = '<p class="status">ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.</p>';
            return;
        }

        const html = list.slice(0, 10).map(item => `
            <div class="card">
                <div class="word">${escapeHtml(item.word)}</div>
                <div class="definition">${formatText(item.definition)}</div>
                <div class="example">"${formatText(item.example)}"</div>
                <div style="margin-top:10px; font-size:0.8em; color:#888;">ğŸ‘ ${item.thumbs_up}</div>
            </div>
        `).join('');
        resultArea.innerHTML = html;
    }

    function handleEnter(e) { if (e.key === 'Enter') startSearch(); }
    function formatText(t) { return escapeHtml(t.replace(/\[|\]/g, "")).replace(/\r\n|\n/g, '<br>'); }
    function escapeHtml(t) { return t ? t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") : ""; }
</script>

</body>
</html>
