<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global Slang Dictionary</title>
    <style>
        :root {
            --primary: #2563eb;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
        }

        body { 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; 
            background-color: var(--bg); 
            margin: 0; 
            padding: 20px; 
            color: var(--text); 
        }

        .container { max-width: 650px; margin: 0 auto; }
        
        /* í—¤ë” ì˜ì—­ */
        header { 
            text-align: center; 
            margin-bottom: 30px; 
        }
        h1 { margin: 0 0 10px 0; font-size: 2rem; }
        .subtitle { color: var(--text-light); font-size: 0.9rem; }

        /* ì„¤ì • ì˜ì—­ (ì–¸ì–´ ì„ íƒ) */
        .settings-bar {
            display: flex;
            justify-content: flex-end;
            margin-bottom: 15px;
        }
        .lang-select {
            padding: 8px 12px;
            border-radius: 20px;
            border: 1px solid #cbd5e1;
            background: white;
            font-size: 0.85rem;
            cursor: pointer;
        }

        /* ë©”ì¸ ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .control-panel {
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .input-group { margin-bottom: 15px; }
        label { display: block; font-size: 0.85rem; font-weight: 600; margin-bottom: 6px; color: var(--text-light); }
        
        select, input { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #e2e8f0; 
            border-radius: 10px; 
            font-size: 16px; 
            box-sizing: border-box; /* íŒ¨ë”© í¬í•¨ í¬ê¸° ê³„ì‚° */
            background-color: #fff;
        }
        
        /* êµ­ê°€ ì„ íƒ ë“œë¡­ë‹¤ìš´ ìŠ¤íƒ€ì¼ */
        select { appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1em; }

        button { 
            width: 100%;
            padding: 14px; 
            background-color: var(--primary); 
            color: white; 
            border: none; 
            border-radius: 10px; 
            font-weight: bold; 
            font-size: 16px; 
            cursor: pointer; 
            transition: opacity 0.2s;
        }
        button:active { opacity: 0.8; }
        button:disabled { background-color: #cbd5e1; cursor: not-allowed; }

        /* ê²°ê³¼ ì¹´ë“œ */
        .card { 
            background: var(--card-bg); 
            padding: 20px; 
            border-radius: 16px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.05); 
            margin-bottom: 16px; 
            border-left: 5px solid var(--primary);
        }
        .word-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .word { font-size: 1.5em; font-weight: 800; color: #1e293b; }
        .likes { font-size: 0.85em; color: var(--text-light); background: #f1f5f9; padding: 4px 8px; border-radius: 12px; }
        
        .definition { margin-bottom: 12px; line-height: 1.6; color: #334155; }
        .example { background-color: #f8fafc; padding: 12px; border-radius: 8px; font-style: italic; color: #475569; font-size: 0.95em; }
        
        .status { text-align: center; color: var(--text-light); margin-top: 40px; }
        
        /* ë±ƒì§€ */
        .badge { display: inline-block; padding: 4px 8px; border-radius: 6px; font-size: 0.75rem; font-weight: bold; margin-bottom: 8px; }
        .badge-us { background: #dbeafe; color: #1e40af; }
        .badge-kr { background: #fee2e2; color: #991b1b; }
    </style>
</head>
<body>

<div class="container">
    <div class="settings-bar">
        <select id="uiLang" class="lang-select" onchange="changeUILanguage()">
            <option value="EN">ğŸŒ English (Interface)</option>
            <option value="KR">ğŸ‡°ğŸ‡· í•œêµ­ì–´ (ì¸í„°í˜ì´ìŠ¤)</option>
            <option value="JP">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª (ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹)</option>
            <option value="ES">ğŸ‡ªğŸ‡¸ EspaÃ±ol (Interfaz)</option>
        </select>
    </div>

    <header>
        <h1 id="appTitle">Global Slang Dictionary</h1>
        <div class="subtitle" id="appSubtitle">Discover street language from around the world</div>
    </header>
    
    <div class="control-panel">
        <div class="input-group">
            <label id="lblTargetCountry">Target Country</label>
            <select id="countrySelect">
                </select>
        </div>

        <div class="input-group">
            <label id="lblSearch">Slang Term</label>
            <input type="text" id="searchInput" placeholder="e.g. Rizz, Flex..." onkeypress="handleEnter(event)">
        </div>

        <button onclick="startSearch()" id="searchBtn">Search</button>
    </div>

    <div id="resultArea"></div>
</div>

<script>
    /* =========================================
       1. ë°ì´í„° & ì„¤ì • (Data & Config)
       ========================================= */
    
    // UI ë²ˆì—­ ë°ì´í„°
    const i18n = {
        EN: {
            title: "Global Slang Dictionary",
            subtitle: "Discover street language from around the world",
            lblCountry: "Target Country / Region",
            lblSearch: "Slang Term",
            btnSearch: "Search",
            placeholder: "e.g. Rizz, Flex...",
            mining: "Mining data... â›ï¸",
            noResult: "No results found.",
            error: "Connection failed.",
            proxyFail: "All proxies failed."
        },
        KR: {
            title: "ê¸€ë¡œë²Œ ìŠ¬ë­ ì‚¬ì „",
            subtitle: "ì „ ì„¸ê³„ì˜ ê¸¸ê±°ë¦¬ ì–¸ì–´ë¥¼ íƒí—˜í•˜ì„¸ìš”",
            lblCountry: "ê²€ìƒ‰í•  êµ­ê°€ / ì§€ì—­",
            lblSearch: "ìŠ¬ë­ ë‹¨ì–´",
            btnSearch: "ê²€ìƒ‰í•˜ê¸°",
            placeholder: "ì˜ˆ: í¼ ë¯¸ì³¤ë‹¤, ì¤‘êº¾ë§ˆ...",
            mining: "ë°ì´í„° ì±„êµ´ ì¤‘ì…ë‹ˆë‹¤... â›ï¸",
            noResult: "ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.",
            error: "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.",
            proxyFail: "ëª¨ë“  ìš°íšŒ ê²½ë¡œê°€ ë§‰í˜”ìŠµë‹ˆë‹¤."
        },
        JP: {
            title: "ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ»ã‚¹ãƒ©ãƒ³ã‚°è¾å…¸",
            subtitle: "ä¸–ç•Œä¸­ã®è‹¥è€…è¨€è‘‰ã‚’æ¤œç´¢",
            lblCountry: "å¯¾è±¡å›½ / åœ°åŸŸ",
            lblSearch: "ã‚¹ãƒ©ãƒ³ã‚°å˜èª",
            btnSearch: "æ¤œç´¢",
            placeholder: "ä¾‹ï¼šæ¨ã—, è‰...",
            mining: "ãƒ‡ãƒ¼ã‚¿åé›†ä¸­... â›ï¸",
            noResult: "çµæœãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚",
            error: "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚",
            proxyFail: "ãƒ—ãƒ­ã‚­ã‚·æ¥ç¶šã«å¤±æ•—ã—ã¾ã—ãŸã€‚"
        },
        ES: {
            title: "Diccionario Global de Argot",
            subtitle: "Descubre el lenguaje callejero del mundo",
            lblCountry: "PaÃ­s / RegiÃ³n de destino",
            lblSearch: "TÃ©rmino de argot",
            btnSearch: "Buscar",
            placeholder: "ej. CheverÃ©, Guey...",
            mining: "Extrayendo datos... â›ï¸",
            noResult: "No se encontraron resultados.",
            error: "OcurriÃ³ un error.",
            proxyFail: "Fallaron todos los proxies."
        }
    };

    // êµ­ê°€ ëª©ë¡ ë°ì´í„°
    const countryData = {
        "Global / English Sphere": [
            { code: "US", name: "ğŸ‡ºğŸ‡¸ United States" },
            { code: "GB", name: "ğŸ‡¬ğŸ‡§ United Kingdom" },
            { code: "CA", name: "ğŸ‡¨- Canada" },
            { code: "AU", name: "ğŸ‡¦ğŸ‡º Australia" },
            { code: "NZ", name: "ğŸ‡³ğŸ‡¿ New Zealand" }
        ],
        "Asia": [
            { code: "KR", name: "ğŸ‡°ğŸ‡· South Korea" },
            { code: "JP", name: "ğŸ‡¯ğŸ‡µ Japan" },
            { code: "CN", name: "ğŸ‡¨ğŸ‡³ China" },
            { code: "VN", name: "ğŸ‡»ğŸ‡³ Vietnam" },
            { code: "TH", name: "ğŸ‡¹ğŸ‡­ Thailand" },
            { code: "PH", name: "ğŸ‡µğŸ‡­ Philippines" },
            { code: "ID", name: "ğŸ‡®ğŸ‡© Indonesia" },
            { code: "MY", name: "ğŸ‡²ğŸ‡¾ Malaysia" },
            { code: "SG", name: "ğŸ‡¸ğŸ‡¬ Singapore" },
            { code: "IN", name: "ğŸ‡®ğŸ‡³ India" }
        ],
        "Europe": [
            { code: "FR", name: "ğŸ‡«ğŸ‡· France" },
            { code: "DE", name: "ğŸ‡©ğŸ‡ª Germany" },
            { code: "ES", name: "ğŸ‡ªğŸ‡¸ Spain" },
            { code: "IT", name: "ğŸ‡®ğŸ‡¹ Italy" },
            { code: "RU", name: "ğŸ‡·ğŸ‡º Russia" },
            { code: "PT", name: "ğŸ‡µğŸ‡¹ Portugal" },
            { code: "IE", name: "ğŸ‡®ğŸ‡ª Ireland" }
        ],
        "Americas": [
            { code: "BR", name: "ğŸ‡§ğŸ‡· Brazil" },
            { code: "MX", name: "ğŸ‡²ğŸ‡½ Mexico" },
            { code: "AR", name: "ğŸ‡¦ğŸ‡· Argentina" },
            { code: "CO", name: "ğŸ‡¨ğŸ‡´ Colombia" }
        ],
        "Others": [
            { code: "ZA", name: "ğŸ‡¿ğŸ‡¦ South Africa" },
            { code: "NG", name: "ğŸ‡³ğŸ‡¬ Nigeria" },
            { code: "EG", name: "ğŸ‡ªğŸ‡¬ Egypt" },
            { code: "SA", name: "ğŸ‡¸ğŸ‡¦ Saudi Arabia" }
        ]
    };

    /* =========================================
       2. ì´ˆê¸°í™” ë° UI ë¡œì§
       ========================================= */
    
    window.onload = function() {
        populateCountries();
        changeUILanguage(); // ì´ˆê¸° ì–¸ì–´ ì„¤ì • ì ìš©
    };

    // êµ­ê°€ ë“œë¡­ë‹¤ìš´ ì±„ìš°ê¸°
    function populateCountries() {
        const select = document.getElementById('countrySelect');
        let html = '';
        
        for (const [region, countries] of Object.entries(countryData)) {
            html += `<optgroup label="${region}">`;
            countries.forEach(c => {
                html += `<option value="${c.code}">${c.name}</option>`;
            });
            html += `</optgroup>`;
        }
        select.innerHTML = html;
    }

    // UI ì–¸ì–´ ë³€ê²½
    function changeUILanguage() {
        const lang = document.getElementById('uiLang').value;
        const text = i18n[lang];

        document.getElementById('appTitle').innerText = text.title;
        document.getElementById('appSubtitle').innerText = text.subtitle;
        document.getElementById('lblTargetCountry').innerText = text.lblCountry;
        document.getElementById('lblSearch').innerText = text.lblSearch;
        document.getElementById('searchBtn').innerText = text.btnSearch;
        document.getElementById('searchInput').placeholder = text.placeholder;
    }

    // í˜„ì¬ UI ì–¸ì–´ì˜ í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° (í—¬í¼)
    function getUiText(key) {
        const lang = document.getElementById('uiLang').value;
        return i18n[lang][key] || i18n['EN'][key];
    }

    /* =========================================
       3. ê²€ìƒ‰ ì—”ì§„ (The Engine)
       ========================================= */

    // í”„ë¡ì‹œ ëª©ë¡ (ì¢€ë¹„ ì „ëµ)
    const PROXIES = [
        (url) => `https://api.allorigins.win/raw?url=${encodeURIComponent(url)}`,
        (url) => `https://corsproxy.io/?${encodeURIComponent(url)}`, 
        (url) => `https://thingproxy.freeboard.io/fetch/${url}`
    ];

    async function startSearch() {
        const input = document.getElementById('searchInput');
        const country = document.getElementById('countrySelect').value;
        const query = input.value.trim();
        const resultArea = document.getElementById('resultArea');
        const btn = document.getElementById('searchBtn');

        if (!query) return alert("Please enter a word!");

        // ìƒíƒœ ì—…ë°ì´íŠ¸
        resultArea.innerHTML = `<p class="status">${getUiText('mining')}</p>`;
        btn.disabled = true;

        /* [ì „ëµ]
           í˜„ì¬ ìš°ë¦¬ëŠ” Urban Dictionary API(ì˜ì–´ê¶Œ)ë§Œ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.
           ë¹„ì˜ì–´ê¶Œ(í•œêµ­, ì¼ë³¸ ë“±)ì€ APIê°€ ì—†ìœ¼ë¯€ë¡œ, 
           1. ì˜ë¯¸ê¶Œì´ë©´ -> Urban Dictionary API í˜¸ì¶œ
           2. ë¹„ì˜ì–´ê¶Œì´ë©´ -> Urban Dictionaryì—ì„œ ê²€ìƒ‰í•˜ë˜, ê²°ê³¼ê°€ ì—†ìœ¼ë©´ êµ¬ê¸€ ê²€ìƒ‰ ë§í¬ ì œê³µ (ì„ì‹œ)
        */
       
        // ì¼ë‹¨ ëª¨ë“  êµ­ê°€ì— ëŒ€í•´ Urban Dictionaryë¥¼ ì°”ëŸ¬ë´…ë‹ˆë‹¤. (ê¸€ë¡œë²Œ ë‹¨ì–´ë„ ë§ìœ¼ë‹ˆê¹Œìš”)
        const targetUrl = `https://api.urbandictionary.com/v0/define?term=${query}`;
        let success = false;

        for (let i = 0; i < PROXIES.length; i++) {
            try {
                const proxyUrl = PROXIES[i](targetUrl);
                const response = await fetch(proxyUrl);
                if (!response.ok) throw new Error("Network response was not ok");
                
                const data = await response.json();
                displayResults(data.list, country, query);
                success = true;
                break; 
            } catch (e) {
                console.warn(`Proxy ${i+1} failed`, e);
            }
        }

        if (!success) {
            resultArea.innerHTML = `<p class="status">âŒ ${getUiText('proxyFail')}</p>`;
        }

        btn.disabled = false;
    }

    function displayResults(list, countryCode, query) {
        const resultArea = document.getElementById('resultArea');
        const uiLang = document.getElementById('uiLang').value;
        
        // ê²°ê³¼ê°€ ì—†ì„ ë•Œ ì²˜ë¦¬
        if (!list || list.length === 0) {
            // ë¹„ì˜ì–´ê¶Œ êµ­ê°€ì¸ë° ê²°ê³¼ê°€ ì—†ìœ¼ë©´ êµ¬ê¸€ ê²€ìƒ‰ ë²„íŠ¼ì´ë¼ë„ ë³´ì—¬ì¤Œ
            if (countryCode !== 'US' && countryCode !== 'GB') {
                resultArea.innerHTML = `
                    <div class="card" style="text-align:center; border-left-color: #f59e0b;">
                        <div class="word">ğŸ•µï¸ Data Not Found</div>
                        <div class="definition">
                            APIì—ì„œ ê²°ê³¼ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.<br>
                            ì§ì ‘ í˜„ì§€ ì›¹ì‚¬ì´íŠ¸ë¥¼ ê²€ìƒ‰í•´ë³´ì‹œê² ìŠµë‹ˆê¹Œ?
                        </div>
                        <a href="https://www.google.com/search?q=${countryCode}+slang+${query}+meaning" target="_blank" 
                           style="display:inline-block; margin-top:15px; text-decoration:none; color:white; background:#f59e0b; padding:10px 20px; border-radius:8px; font-weight:bold;">
                           Google Search (${countryCode})
                        </a>
                    </div>
                `;
            } else {
                resultArea.innerHTML = `<p class="status">${getUiText('noResult')}</p>`;
            }
            return;
        }

        // ê²°ê³¼ ë Œë”ë§
        const html = list.slice(0, 5).map(item => `
            <div class="card">
                <div class="word-header">
                    <span class="word">${escapeHtml(item.word)}</span>
                    <span class="likes">ğŸ‘ ${item.thumbs_up}</span>
                </div>
                <div class="badge badge-us">Source: Urban Dictionary</div>
                
                <div class="definition">${formatText(item.definition)}</div>
                <div class="example">"${formatText(item.example)}"</div>
            </div>
        `).join('');
        
        resultArea.innerHTML = html;
    }

    function handleEnter(e) { if (e.key === 'Enter') startSearch(); }
    function formatText(t) { return escapeHtml(t.replace(/\[|\]/g, "")).replace(/\r\n|\n/g, '<br>'); }
    function escapeHtml(t) { return t ? t.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;") : ""; }
</script>

</body>
</html>
